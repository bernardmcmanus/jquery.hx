/* ------------------------------------- */
/*        jQuery.hx v0.3.2 (beta)        */
/* ------------------------------------- */

(function(e){var t={debug:false};var n=function(t){this.element=t;this.queue={};this.components={};this.listening=false;this._callback=function(){};this.keys={config:["property","value","duration","easing","delay","done"],calculated:["width","height"],nonXform:["opacity"]};var n=e(this.element);n.hxManager=1;e.extend(n,this);return n};n.prototype={_getComputedStyle:function(){var e=window.getComputedStyle(this.element).webkitTransform;if(e!=="none"){this.components["-webkit-transform"]=this.components["-webkit-transform"]||{};this.components["-webkit-transform"].computed=this._parse(e)}},_getTransformType:function(e){var t=[];var n=[];for(var r in e){if(this.keys.config.indexOf(r)<0){if(this.keys.calculated.indexOf(r)>=0){n.push(r)}else{t.push(r)}}if(t.length>0&&n.length>0)throw"Error: Incompatible transform properties."}return n.length>0?"calc":"raw"},handleEvent:function(e){this._transend(e)},setOrigin:function(t,n){t=t&&typeof t!=="undefined"?t:50;n=n&&typeof n!=="undefined"?n:50;e(this.element).css({"-webkit-transform-origin":t+"% "+n+"%"});this.transformOrigin={x:t,y:n}},_calcWidthScale:function(e){return e/this.element.getBoundingClientRect().width},_calcHeightScale:function(e){return e/this.element.getBoundingClientRect().height},_getFixedOrigin:function(t){var n=e.extend({},window.getComputedStyle(this.element));var r=this.element.getBoundingClientRect();n.width=parseInt(n.width,10);n.height=parseInt(n.height,10);var i=(r.width-n.width)*t[0]/2;var s=(r.height-n.height)*t[1]/2;var o=(r.width*t[0]-n.width)/2-i;var u=(r.height*t[1]-n.height)/2-s;return[o,u]},apply:function(e,t){this._getComputedStyle();return this.set(e,t,true)},set:function(n,r,i){var s=this;this.components[n]=this.components[n]||{};i=typeof i!=="undefined"?i:false;if(!i&&typeof this.components[n].computed!=="undefined")delete this.components[n].computed;if(this._getTransformType(r)==="raw"){this.components[n]=e.extend(this.components[n],this._getRawComponents(r))}else{this.components[n]=e.extend(this.components[n],this._getCalculatedComponents(r))}if(t.debug)console.log(this.components);var o={value:this.keys.nonXform.indexOf(n)<0?this._buildTransformString(this.components[n]):this.components[n][n][0],duration:r.duration?r.duration+"ms":"400ms",easing:this._easing(r.easing),delay:r.delay||1,done:r.done||[]};this.queue[n]=o;if(t.debug)console.log(this.queue);var u=this._buildTransitionString();if(t.debug)console.log(u);e(this.element).css("-webkit-transition",u);if(!this.listening){this.element.addEventListener("webkitTransitionEnd",this);this.listening=true}setTimeout(function(){e(s.element).css(n,o.value)},this.queue[n].delay);return this},_getRawComponents:function(t){var n=[];var r={};for(var i in t){if(this.keys.config.indexOf(i)>=0)continue;var s=Array.isArray(t[i])?t[i]:[t[i]];switch(i){case"matrix3d":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];case"matrix":n=[0,0,0,0,0,0];case"translate3d":n=[0,0,0];break;case"scale3d":n=[1,1,1];break;case"rotate3d":n=[0,0,0,0];break;case"rotateX":case"rotateY":case"rotateZ":case"scaleX":case"scaleY":case"scaleZ":case"opacity":n=[0];break}s=e.extend(n,s);r[i]=s}return r},_getCalculatedComponents:function(e){var t=[];var n={};for(var r in e){if(this.keys.config.indexOf(r)>=0)continue;switch(r){case"width":var i=this._calcWidthScale(e[r]);n.translate3d=n.translate3d||[0,0,0];n.scale3d=n.scale3d||[1,1,1];n.translate3d[0]=n.translate3d[0]+this._getFixedOrigin([i,1])[0];n.scale3d[0]=n.scale3d[0]*i;break;case"height":var s=this._calcHeightScale(e[r]);n.translate3d=n.translate3d||[0,0,0];n.scale3d=n.scale3d||[1,1,1];n.translate3d[1]=n.translate3d[1]+this._getFixedOrigin([1,s])[1];n.scale3d[1]=n.scale3d[1]*s;break}}return n},_buildComponentString:function(e,t){var n="";var r="";switch(e){case"computed":e=t.type;t=t.transform;n=", ";r="";break;case"translate3d":n="px, ";r="px";break;case"matrix3d":case"matrix":case"scale3d":n=", ";r="";break;case"rotate3d":n=", ";r="deg";break;case"rotateX":case"rotateY":case"rotateZ":n="";r="deg";break;case"scaleX":case"scaleY":case"scaleZ":n="";r="";break}return e+"("+t.join(n)+r+")"},_buildTransformString:function(e){var t=[];for(var n in e){if(this.keys.config.indexOf(n)<0){var r=this._buildComponentString(n,e[n]);t.push(r)}}return t.join(" ")},_buildTransitionString:function(){var e=[];for(var t in this.queue){var n=t+" "+this.queue[t].easing+" "+this.queue[t].duration;if(e.indexOf(n)<0)e.push(n)}return e.join(", ")},_isHXTransform:function(e){var t=["translate3d","scale3d","rotate3d","matrix","matrix3d"];var n=false;for(var r=0;r<t.length;r++){if(e.match(t[r]==="matrix"?t[r]+"\\(":t[r])){n=t[r];break}}return n},_parse:function(e){var t=this._isHXTransform(e);if(!e||!t)return{};e=e.replace(/px/g,"").replace(/ /g,"").replace(/\)/g,"").split("(")[1].split(",");var n=Array.prototype.map;e=n.call(e,function(e){return parseFloat(e,10)});return{type:t,transform:e}},_transend:function(e){var t=e.propertyName;var r=new RegExp(t,"i");for(var i in this.queue){if(r.test(i)){t=i;break}}if(typeof this.queue[t]!=="undefined"&&typeof this.queue[t].done[0]==="function"){for(var s=0;s<this.queue[t].done.length;s++){this.queue[t].done[s].call(this,e)}}delete this.queue[t];if(n.objSize(this.queue)<1){if(typeof this._callback==="function")this._callback.call(this,e);this.element.removeEventListener("webkitTransitionEnd",this);this.listening=false}},done:function(e){this._callback=e||function(){}},_easing:function(e){var t={linear:{p1:.25,p2:.25,p3:.75,p4:.75},ease:{p1:.25,p2:.1,p3:.25,p4:1},"ease-in":{p1:.42,p2:0,p3:1,p4:1},"ease-out":{p1:0,p2:0,p3:.58,p4:1},"ease-in-out":{p1:.42,p2:0,p3:.58,p4:1},easeInQuad:{p1:.55,p2:.085,p3:.68,p4:.53},easeInCubic:{p1:.55,p2:.055,p3:.675,p4:.19},easeInQuart:{p1:.895,p2:.03,p3:.685,p4:.22},easeInQuint:{p1:.755,p2:.05,p3:.855,p4:.06},easeInSine:{p1:.47,p2:0,p3:.745,p4:.715},easeInExpo:{p1:.95,p2:.05,p3:.795,p4:.035},easeInCirc:{p1:.6,p2:.04,p3:.98,p4:.335},easeInBack:{p1:.6,p2:-.28,p3:.735,p4:.045},easeOutQuad:{p1:.25,p2:.46,p3:.45,p4:.94},easeOutCubic:{p1:.215,p2:.61,p3:.355,p4:1},easeOutQuart:{p1:.165,p2:.84,p3:.44,p4:1},easeOutQuint:{p1:.23,p2:1,p3:.32,p4:1},easeOutSine:{p1:.39,p2:.575,p3:.565,p4:1},easeOutExpo:{p1:.19,p2:1,p3:.22,p4:1},easeOutCirc:{p1:.075,p2:.82,p3:.165,p4:1},easeOutBack:{p1:.175,p2:.885,p3:.32,p4:1.275},easeInOutQuad:{p1:.455,p2:.03,p3:.515,p4:.955},easeInOutCubic:{p1:.645,p2:.045,p3:.355,p4:1},easeInOutQuart:{p1:.77,p2:0,p3:.175,p4:1},easeInOutQuint:{p1:.86,p2:0,p3:.07,p4:1},easeInOutSine:{p1:.445,p2:.05,p3:.55,p4:.95},easeInOutExpo:{p1:1,p2:0,p3:0,p4:1},easeInOutCirc:{p1:.785,p2:.135,p3:.15,p4:.86},easeInOutBack:{p1:.68,p2:-.55,p3:.265,p4:1.55},custom:{p1:0,p2:.35,p3:.5,p4:1.3},random:{p1:Math.random().toPrecision(3),p2:Math.random().toPrecision(3),p3:Math.random().toPrecision(3),p4:Math.random().toPrecision(3)},easeOutBackMod1:{p1:.7,p2:-1,p3:.5,p4:2},easeMod1:{p1:.25,p2:.2,p3:.25,p4:1}};var n=t[e]?t[e]:t.ease;return"cubic-bezier("+n.p1+", "+n.p2+", "+n.p3+", "+n.p4+")"}};n.objSize=function(e){if(typeof e!=="object")return 0;var t=0,n;for(n in e){if(n in e)t++}return t};e.fn.hx=function(t,r){var i=this;if(!i.hxManager)i=new n(e(this).get(0));if(t)e.fn.hx[t].call(i,r);return i};e.fn.hx.scale=function(t){t=e.extend({duration:400,easing:"ease",delay:1,vector:{},done:function(){}},t);t.done=function(){};t.vector=e.extend({x:1,y:1,z:1},t.vector);t.vector.x=t.vector.x===0?1e-6:t.vector.x;t.vector.y=t.vector.y===0?1e-6:t.vector.y;t.vector.z=t.vector.z===0?1e-6:t.vector.z;this.apply("-webkit-transform",{scale3d:[t.vector.x,t.vector.y,t.vector.z],duration:t.duration,easing:t.easing,delay:t.delay,done:[t.done]})};e.fn.hx.translate=function(t){t=e.extend({duration:400,easing:"ease",delay:1,vector:{},done:function(){}},t);t.done=function(){};t.vector=e.extend({x:0,y:0,z:0},t.vector);this.apply("-webkit-transform",{translate3d:[t.vector.x,t.vector.y,t.vector.z],duration:t.duration,easing:t.easing,delay:t.delay,done:[t.done]})};e.fn.hx.fadeOut=function(t){t=e.extend({duration:400,easing:"ease",delay:1,done:function(){}},t);t.done=function(){};e(this).css({"-webkit-transition":"",opacity:1,display:"block"});var n=function(){e(this).css({"-webkit-transition":"",opacity:1,display:"none"})};this.set("opacity",{opacity:0,duration:t.duration,easing:t.easing,delay:t.delay,done:[n,t.done]})};e.fn.hx.fadeIn=function(t){t=e.extend({duration:400,easing:"ease",delay:1,done:function(){}},t);t.done=function(){};e(this).css({"-webkit-transition":"",opacity:0,display:"block"});this.set("opacity",{opacity:1,duration:t.duration,easing:t.easing,delay:t.delay,done:[t.done]})};e.fn.hx.notify=function(t){if(e(this).find(".hx_notify").length>0)return;var n=this;this.options=e.extend({message:"",timeout:1500,css:{},onOpen:function(){},onClose:function(){}},t||{});this.dims=e(this).get(0).getBoundingClientRect();this.Top=Math.round(this.dims.height*.4);this.Left=Math.round(this.dims.width*.1);this.Width=this.dims.width-this.Left*2;this.Height=Math.round(this.Width*.15);this.fontSize=Math.round(this.Height*.3);this.radius=Math.round(this.fontSize*.8);this.options.css=e.extend({"text-align":"center","font-size":this.fontSize+"px",color:"white",position:"absolute",left:this.Left+"px",top:this.Top+"px",width:this.Width+"px",height:this.Height+"px","line-height":this.Height+"px","background-color":"rgba(0,0,0,0.8)","-webkit-border-radius":this.radius+"px","z-index":1e4,display:"none"},this.options.css);var r=document.createElement("div");e(r).addClass("hx_notify").css(this.options.css).html(this.options.message).appendTo(e(this));this.overlay=e(r);this.open=function(){this.overlay.hx("fadeIn",{duration:300}).hx("translate",{vector:{y:-this.Height},duration:300}).done(this.options.onOpen)};this.close=function(){this.overlay.hx("fadeOut",{duration:300}).hx("translate",{vector:{y:this.Height},duration:300}).done(function(t){n.options.onClose(t);e(this.element).remove()})};this.open();if(this.options.timeout>0){setTimeout(function(){n.close()},this.options.timeout)}}})(jQuery)