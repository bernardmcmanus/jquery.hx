/*! jQuery.hx - 0.4.0 - Bernard McManus - 2013-12-12 */
!function(){var a={debug:{queue:!1,components:!1,tString:!1,transitionEndEvent:!0}};window.hxManager=function(a){this.element=a,this.queue={},this.components={},this.listening=!1,this._callback=function(){},this.keys={config:["property","value","duration","easing","delay","done"],calculated:["width","height"],nonXform:["opacity"]};var b=$(this.element);return b.hxManager=1,$.extend(b,this),b},hxManager.prototype={_getComputedStyle:function(){var a=window.getComputedStyle(this.element);if("none"===a.display){var b=$.extend({},this.element.style),c=-1e3;$(this.element).css({position:"fixed",left:c+"px",top:c+"px","-webkit-transition":"none",opacity:0,display:"block"}),a=$.extend({},window.getComputedStyle(this.element)),$(this.element).css({position:b.position,left:b.left,top:b.top,"-webkit-transition":b.webkitTransition,opacity:"",display:"none"})}"undefined"!=typeof a.webkitTransform&&"none"!==a.webkitTransform&&""!==a.webkitTransform&&(this.components["-webkit-transform"]=this.components["-webkit-transform"]||{},this.components["-webkit-transform"].computed=this._parse(a.webkitTransform))},_getTransformType:function(a){var b=[],c=[];for(var d in a)if(this.keys.config.indexOf(d)<0&&(this.keys.calculated.indexOf(d)>=0?c.push(d):b.push(d)),b.length>0&&c.length>0)throw"Error: Incompatible transform properties.";return c.length>0?"calc":"raw"},handleEvent:function(a){this._transend(a)},setOrigin:function(a,b){a=a&&"undefined"!=typeof a?a:50,b=b&&"undefined"!=typeof b?b:50,$(this.element).css({"-webkit-transform-origin":a+"% "+b+"%"}),this.transformOrigin={x:a,y:b}},_calcWidthScale:function(a){return a/this.element.getBoundingClientRect().width},_calcHeightScale:function(a){return a/this.element.getBoundingClientRect().height},_getFixedOrigin:function(a){var b=$.extend({},window.getComputedStyle(this.element)),c=this.element.getBoundingClientRect();b.width=parseInt(b.width,10),b.height=parseInt(b.height,10);var d=(c.width-b.width)*a[0]/2,e=(c.height-b.height)*a[1]/2,f=(c.width*a[0]-b.width)/2-d,g=(c.height*a[1]-b.height)/2-e;return[f,g]},apply:function(a,b){return this._getComputedStyle(),this.set(a,b,!0)},set:function(b,c,d){var e=this;this.components[b]=this.components[b]||{},d="undefined"!=typeof d?d:!1,d||"undefined"==typeof this.components[b].computed||delete this.components[b].computed,this.components[b]="raw"===this._getTransformType(c)?$.extend(this.components[b],this._getRawComponents(c)):$.extend(this.components[b],this._getCalculatedComponents(c)),a.debug.components&&console.log(this.components),this.queue[b]=new animator({element:this.element,property:b,value:this.keys.nonXform.indexOf(b)<0?this._buildTransformString(this.components[b]):this.components[b][b][0],duration:c.duration?c.duration:400,easing:hxManager._easing(c.easing),delay:c.delay||1,done:c.done||[]}),a.debug.queue&&console.log($.extend({},this.queue));var f=this._buildTransitionString();return $(this.element).css("-webkit-transition",f),a.debug.tString&&console.log(f),this.listening||(this.element.addEventListener("webkitTransitionEnd",this),this.listening=!0),setTimeout(function(){e.queue[b].start(),$(e.element).css(b,e.queue[b].value)},this.queue[b].delay),this},_getRawComponents:function(a){var b=[],c={};for(var d in a)if(!(this.keys.config.indexOf(d)>=0)){var e=Array.isArray(a[d])?a[d]:[a[d]];switch(d){case"matrix3d":b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];break;case"matrix":b=[0,0,0,0,0,0];break;case"translate3d":b=[0,0,0];break;case"scale3d":b=[1,1,1];break;case"rotate3d":b=[0,0,0,0];break;case"rotateX":case"rotateY":case"rotateZ":case"scaleX":case"scaleY":case"scaleZ":case"opacity":b=[0]}e=$.extend(b,e),c[d]=e}return c},_getCalculatedComponents:function(a){var b={};for(var c in a)if(!(this.keys.config.indexOf(c)>=0))switch(c){case"width":var d=this._calcWidthScale(a[c]);b.translate3d=b.translate3d||[0,0,0],b.scale3d=b.scale3d||[1,1,1],b.translate3d[0]=b.translate3d[0]+this._getFixedOrigin([d,1])[0],b.scale3d[0]=b.scale3d[0]*d;break;case"height":var e=this._calcHeightScale(a[c]);b.translate3d=b.translate3d||[0,0,0],b.scale3d=b.scale3d||[1,1,1],b.translate3d[1]=b.translate3d[1]+this._getFixedOrigin([1,e])[1],b.scale3d[1]=b.scale3d[1]*e}return b},_buildComponentString:function(a,b){var c="",d="";switch(a){case"computed":a=b.type,b=b.transform,c=", ",d="";break;case"translate3d":c="px, ",d="px";break;case"matrix3d":case"matrix":case"scale3d":c=", ",d="";break;case"rotate3d":c=", ",d="deg";break;case"rotateX":case"rotateY":case"rotateZ":c="",d="deg";break;case"scaleX":case"scaleY":case"scaleZ":c="",d=""}return a+"("+b.join(c)+d+")"},_buildTransformString:function(a){var b=[];for(var c in a)if(this.keys.config.indexOf(c)<0){var d=this._buildComponentString(c,a[c]);b.push(d)}return b.join(" ")},_buildTransitionString:function(){var a=[];for(var b in this.queue){var c=b+" "+this.queue[b].easing+" "+this.queue[b].duration+"ms";a.indexOf(c)<0&&a.push(c)}return a.join(", ")},_isHXTransform:function(a){for(var b=["translate3d","scale3d","rotate3d","matrix","matrix3d"],c=!1,d=0;d<b.length;d++)if(a.match("matrix"===b[d]?b[d]+"\\(":b[d])){c=b[d];break}return c},_parse:function(a){var b=this._isHXTransform(a);if(!a||!b)return{};a=a.replace(/px/g,"").replace(/ /g,"").replace(/\)/g,"").split("(")[1].split(",");var c=Array.prototype.map;return a=c.call(a,function(a){return parseFloat(a,10)}),{type:b,transform:a}},_transend:function(b){a.debug.transitionEndEvent&&console.log(b);var c=b.propertyName||b.detail.propertyName,d=new RegExp(c,"i");for(var e in this.queue)if(d.test(e)){c=e;break}if("undefined"!=typeof this.queue[c]&&"function"==typeof this.queue[c].done[0])for(var f=0;f<this.queue[c].done.length;f++)this.queue[c].done[f].call(this,b);this.queue[c].destroy(),delete this.queue[c],hxManager.objSize(this.queue)<1&&("function"==typeof this._callback&&this._callback.call(this,b),this.element.removeEventListener("webkitTransitionEnd",this),this.listening=!1)},done:function(a){this._callback=a||function(){}}},hxManager.objSize=function(a){if("object"!=typeof a)return 0;var b,c=0;for(b in a)b in a&&c++;return c}}(),function(a){var b=function(a){var b={linear:{p1:.25,p2:.25,p3:.75,p4:.75},ease:{p1:.25,p2:.1,p3:.25,p4:1},"ease-in":{p1:.42,p2:0,p3:1,p4:1},"ease-out":{p1:0,p2:0,p3:.58,p4:1},"ease-in-out":{p1:.42,p2:0,p3:.58,p4:1},easeInQuad:{p1:.55,p2:.085,p3:.68,p4:.53},easeInCubic:{p1:.55,p2:.055,p3:.675,p4:.19},easeInQuart:{p1:.895,p2:.03,p3:.685,p4:.22},easeInQuint:{p1:.755,p2:.05,p3:.855,p4:.06},easeInSine:{p1:.47,p2:0,p3:.745,p4:.715},easeInExpo:{p1:.95,p2:.05,p3:.795,p4:.035},easeInCirc:{p1:.6,p2:.04,p3:.98,p4:.335},easeInBack:{p1:.6,p2:-.28,p3:.735,p4:.045},easeOutQuad:{p1:.25,p2:.46,p3:.45,p4:.94},easeOutCubic:{p1:.215,p2:.61,p3:.355,p4:1},easeOutQuart:{p1:.165,p2:.84,p3:.44,p4:1},easeOutQuint:{p1:.23,p2:1,p3:.32,p4:1},easeOutSine:{p1:.39,p2:.575,p3:.565,p4:1},easeOutExpo:{p1:.19,p2:1,p3:.22,p4:1},easeOutCirc:{p1:.075,p2:.82,p3:.165,p4:1},easeOutBack:{p1:.175,p2:.885,p3:.32,p4:1.275},easeInOutQuad:{p1:.455,p2:.03,p3:.515,p4:.955},easeInOutCubic:{p1:.645,p2:.045,p3:.355,p4:1},easeInOutQuart:{p1:.77,p2:0,p3:.175,p4:1},easeInOutQuint:{p1:.86,p2:0,p3:.07,p4:1},easeInOutSine:{p1:.445,p2:.05,p3:.55,p4:.95},easeInOutExpo:{p1:1,p2:0,p3:0,p4:1},easeInOutCirc:{p1:.785,p2:.135,p3:.15,p4:.86},easeInOutBack:{p1:.68,p2:-.55,p3:.265,p4:1.55},easeOutBackMod1:{p1:.7,p2:-1,p3:.5,p4:2},easeMod1:{p1:.25,p2:.2,p3:.25,p4:1}},c={};return c="object"==typeof a?a:b[a]?b[a]:b.ease,"cubic-bezier("+c.p1+", "+c.p2+", "+c.p3+", "+c.p4+")"};$.extend(a,{_easing:b})}(hxManager);var animator=function(a){a=$.extend({timeout:null,buffer:50},a),$.extend(this,a)};animator.prototype={start:function(){var a=this,b=this.duration+this.buffer;this.element.addEventListener("webkitTransitionEnd",this),this.timeout=setTimeout(function(){a._dispatchEvent.call(a)},b)},handleEvent:function(a){var b=a.propertyName||a.detail.propertyName,c=new RegExp(b,"i");c.test(this.property)&&(b=this.property),"webkitTransitionEnd"===a.type&&b===this.property&&this.destroy()},_createEvent:function(){var a={};try{a=new CustomEvent("webkitTransitionEnd",{bubbles:!0,cancelable:!0,detail:{propertyName:this.property}})}catch(b){a=document.createEvent("Event"),a.initEvent("webkitTransitionEnd",!0,!0),a.detail={propertyName:this.property}}return a},_dispatchEvent:function(){var a=this._createEvent();this.element.dispatchEvent(a)},destroy:function(){clearTimeout(this.timeout),this.element.removeEventListener("webkitTransitionEnd",this)}},function(a){a.fn.hx=function(b,c){var d=this;return d.hxManager||(d=new hxManager(a(this).get(0))),b&&a.fn.hx[b].call(d,c),d},a.fn.hx.transform=function(b){b=a.extend({duration:400,easing:"ease",delay:1,done:function(){},relative:!0},b),b.done=function(){};var c=a.extend({},b,{done:[b.done]});delete c.relative,b.relative?this.apply("-webkit-transform",c):this.set("-webkit-transform",c)},a.fn.hx.fadeOut=function(b){b=a.extend({duration:400,easing:"ease",delay:1,done:function(){}},b),b.done=function(){},a(this).css({"-webkit-transition":"",opacity:1,display:"block"});var c=function(){a(this).css({"-webkit-transition":"",opacity:1,display:"none"})},d=a.extend({},b,{opacity:0,done:[c,b.done]});this.set("opacity",d)},a.fn.hx.fadeIn=function(b){b=a.extend({duration:400,easing:"ease",delay:1,done:function(){}},b),b.done=function(){},a(this).css({"-webkit-transition":"",opacity:0,display:"block"});var c=a.extend({},b,{opacity:1,done:[b.done]});this.set("opacity",c)},a.fn.hx.notify=function(b){if(!(a(this).find(".hx_notify").length>0)){var c=this;this.options=a.extend({message:"",timeout:1500,css:{},onOpen:function(){},onClose:function(){}},b||{}),this.dims=a(this).get(0).getBoundingClientRect(),this.Top=Math.round(.4*this.dims.height),this.Left=Math.round(.1*this.dims.width),this.Width=this.dims.width-2*this.Left,this.Height=Math.round(.15*this.Width),this.fontSize=Math.round(.3*this.Height),this.radius=Math.round(.8*this.fontSize),this.options.css=a.extend({"text-align":"center","font-size":this.fontSize+"px",color:"white",position:"absolute",left:this.Left+"px",top:this.Top+"px",width:this.Width+"px",height:this.Height+"px","line-height":this.Height+"px","background-color":"rgba(0,0,0,0.8)","-webkit-border-radius":this.radius+"px","z-index":1e4,display:"none"},this.options.css);var d=document.createElement("div");a(d).addClass("hx_notify").css(this.options.css).html(this.options.message).appendTo(a(this)),this.overlay=a(d),this.open=function(){this.overlay.hx("fadeIn",{duration:300}).hx("transform",{translate3d:[0,-this.Height]}).done(this.options.onOpen)},this.close=function(){this.overlay.hx("transform",{translate3d:0,relative:!1}).hx("fadeOut",{duration:300}).done(function(b){c.options.onClose(b),a(this.element).remove()})},this.open(),this.options.timeout>0&&setTimeout(function(){c.close()},this.options.timeout)}}}(jQuery);