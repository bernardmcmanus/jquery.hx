/*! wee-promise - 0.1.4 - Bernard McManus - gf7782e - 2014-09-18 */
!function(a){"object"==typeof exports?module.exports=a:window.Promise=window.Promise||a}(function(a,b){function c(a){var b=this;g(b,m,0),g(b,n,[]),g(b,t,[]),g(b,u,[]),g(b,v,[]),b[y]=!1,b[o]=d(b,u),b[p]=d(b,v),h(function(){i(b,function(){a(b[o],b[p])}),b[y]=!0})}function d(a,b){function c(d){h(a[y]?function(){a[m]||a[x](b,d)[x](t,d)}:function(){c(d)})}return function(a){c(a)}}function e(a,b,c,d,e){return function(){var g=f(a,1),h=f(a,-1);if(j(g)===d){var i=g.map(function(a){return a[n][0]});b(e?i[0]:i)}else j(h)>0&&c(h[0][n][0])}}function f(a,b){return a.filter(function(a){return a[m]===b})}function g(b,c,d){a.defineProperty(b,c,{value:d,writable:!0})}function h(a){b(a,1)}function i(a,b){try{b()}catch(c){a[x](v,c)}}function j(a){return a.length}function k(a,b){a.forEach(b)}var l="prototype",m="state",n="args",o="resolve",p="reject",q="always",r="then",s="catch",t="_"+q,u="_"+r,v="_"+s,w="_add",x="_exec",y="_ready",z={};return z[v]=-1,z[u]=1,c[l][w]=function(a,b){var c=this;return b&&c[a].push(b),c},c[l][x]=function(a,b){b=[b];var c=this,d=c[a],e=j(d),f=0;return i(c,function(){for(;e>f&&j(d)>0;)(z[a]?d.shift():d[f]).apply(null,b),f++}),c[n]=b,c[m]=z[a]||c[m],c},c[l][q]=function(a){return this[w](t,a)},c[l][r]=function(a,b){return this[w](u,a)[s](b)},c[l][s]=function(a){return this[w](v,a)},c.all=function(a){return new c(function(b,c){k(a,function(d){d[q](e(a,b,c,j(a)))})})},c.race=function(a){return new c(function(b,c){k(a,function(d){d[q](e(a,b,c,1,!0))})})},c}(Object,setTimeout));