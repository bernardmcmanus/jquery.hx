/*! MOJO - 0.1.2 - Bernard McManus <bernard.mcmanus.iv@gmail.com> (http://github.com/elnarddogg/) - 2014-07-21 */
var _MOJO={},MOJO={};_MOJO.When=function(){function a(){}function b(a,b){return a.map(function(a){return a.handler}).indexOf(b)}function c(a){return Array.prototype.shift.call(a)}function d(a,b){a.split(" ").forEach(b)}return a.prototype={when:function(){var a=this,b=arguments,e=c(b),f=b.length>1?c(b):f,g=c(b);d(e,function(b){var c=new _MOJO.EventHandler(g,f);a._addHandler(b,c)})},happen:function(a,b){function c(a,b){var c=f(a);return c.indexOf(b)>=0}var e=this,f=e._getHandlers.bind(e);d(a,function(a){var d=f(a),g=new _MOJO.Event(e,a);d.forEach(function(d){c(a,d)&&d.invoke(g,b)})})},dispel:function(a,b){var c=this,e=c._getHandlers.bind(c);d(a,function(a){b?c._removeHandler(e(a),b):delete e()[a]})},_getHandlers:function(a){var b=this.handlers;return a?b[a]||[]:b},_addHandler:function(a,b){var c=this,d=c.handlers;(d[a]=d[a]||[]).push(b)},_removeHandler:function(a,c){a.splice(b(a,c),1)}},a}(),_MOJO.EventHandler=function(){function a(a,b){var c=this;c.handler=a,c.args=function(a){return a=void 0!==a?a:[],a instanceof Array?a:[a]}(b)}return a.prototype={invoke:function(a,b){var c=this,d=c.args.concat(b||[]);d.unshift(a),c.handler.apply(null,d)}},a}(),_MOJO.Event=function(){function a(a,b){var c=this,d=!1;c.bubbles=d,c.cancelBubble=d,c.cancelable=d,c.defaultPrevented=d,c.target=a,c.type=b,c.timeStamp=Date.now()}return a.prototype={preventDefault:function(){this.defaultPrevented=!0},stopPropagation:function(){this.cancelBubble=!0}},a}(),MOJO=function(a){function b(a){a=a||{};var c=this;b.Each(a,function(a,b){c[b]=a}),b.Hoist(c)}var c=b.prototype=new a.When;return c.each=function(a){var c=this;b.Each(c,a,c.keys)},c.set=function(a,b){var c=this;return c[a]=b,c.happen("set",a),c[a]},c.remove=function(a){var b=this;delete b[a],b.happen("remove",a)},b}(_MOJO),MOJO.Each=function(){function a(a,b,c){(c||Object.keys(a)).forEach(function(c,d){b(a[c],c,d)})}return a}(),MOJO.Hoist=function(){function a(a){var b={};Object.defineProperties(a,{handlers:{get:function(){return b},configurable:!0},keys:{get:function(){return Object.keys(a)},configurable:!0},values:{get:function(){return a.keys.map(function(b){return a[b]})},configurable:!0},length:{get:function(){return a.keys.length},configurable:!0}})}return a}(),function(a){"object"==typeof exports?module.exports=a:window.MOJO=a}(MOJO);