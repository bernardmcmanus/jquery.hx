/*! MOJO - 0.1.3 - Bernard McManus - 1eb1045 - 2014-07-28 */
var _MOJO={},MOJO={};_MOJO.EventHandler=function(){function a(a,b){var c=this;c.handler=a,c.active=!0,c.callback=function(){},c.args=function(a){return a=void 0!==a?a:[],a instanceof Array?a:[a]}(b)}return a.prototype={invoke:function(a,b){var c=this,d=c.handler;if(c.active&&!a.isBreak&&!a.shouldSkip(d)){var e=c.args.concat(void 0!==b?b:[]);e.unshift(a),d.apply(null,e),c.callback(a,d)}}},a}(),_MOJO.Event=function(){function a(a,b){var c=this,d=!1;c.isBreak=d,c.cancelBubble=d,c.defaultPrevented=d,c.skipHandlers=[],c.target=a,c.type=b,c.timeStamp=Date.now()}return a.prototype={skip:function(a){this.skipHandlers.push(a)},shouldSkip:function(a){return this.skipHandlers.indexOf(a)>=0},"break":function(){this.isBreak=!0},preventDefault:function(){this.defaultPrevented=!0},stopPropagation:function(){this.cancelBubble=!0}},a}(),_MOJO.When=function(a,b){function c(a,b){return a.map(function(a){return a.handler}).indexOf(b)}function d(a){return Array.prototype.shift.call(a)}function e(a,b){(a instanceof Array?a:a.split(" ")).forEach(b)}return{once:function(){var a=this,b=a.when.apply(a,arguments);b.forEach(function(a){a.callback=function(){this.active=!1}})},when:function(){var b=this,c=arguments,f=d(c),g=c.length>1?d(c):g,h=d(c),i=[];return e(f,function(c,d){i.push(new a(h,g)),b._addHandler(c,i[d])}),i},happen:function(a,c){var d=this;e(a,function(a){var e=d._getHandlers(a,!0),f=new b(d,a);e.filter(function(a){return a.invoke(f,c),!a.active}).forEach(function(b){d._removeHandler(d._getHandlers(a),b.handler)})})},dispel:function(a,b){var c=this,d=c._getHandlers();a=a||Object.keys(d).join(" "),e(a,function(a){b?c._removeHandler(d[a],b):delete d[a]})},_getHandlers:function(a,b){var c=this,d=c.handlers=c.handlers||{},e=a?d[a]=d[a]||[]:d;return b?a?e.slice():Object.create(e):e},_addHandler:function(a,b){var c=this;c._getHandlers(a).push(b)},_removeHandler:function(a,b){var d=c(a,b);d>=0&&a.splice(d,1)}}}(_MOJO.EventHandler,_MOJO.Event),MOJO=function(a){function b(a){a=a||{};var c=this;b.Each(a,function(a,b){c[b]=a}),b.Construct(c)}var c=b.prototype=Object.create(a.When);return c.each=function(a){var c=this;b.Each(c,a,c.keys)},c.set=function(a,b){var c=this;return c[a]=b,c.happen("set",a),c[a]},c.remove=function(a){var b=this;delete b[a],b.happen("remove",a)},b}(_MOJO),MOJO.Each=function(){function a(a,b,c){(c||Object.keys(a)).forEach(function(c,d){b(a[c],c,d)})}return a}(),MOJO.Create=function(){function a(a){var b=Object.create(MOJO.prototype);return MOJO.Each(a,function(a,c){b[c]=a}),b}return a}(),MOJO.Construct=function(){function a(a){var c={};Object.defineProperties(a,{handlers:b(function(){return c}),keys:b(function(){return Object.keys(a)}),length:b(function(){return a.keys.length})})}function b(a){return{get:a,configurable:!0}}return a}(),function(a){"object"==typeof exports?module.exports=a:window.MOJO=a}(MOJO);